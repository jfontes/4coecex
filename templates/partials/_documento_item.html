<div class="flex-grow-1 mb-2 mb-md-0 me-3">
    <a href="{{ url_for('documento.ver', processo_id=processo.id, documento_id=doc.id) }}" target="_blank" class="fw-bold">
        <i class="bi bi-file-earmark-pdf"></i> {{ doc.nome_arquivo }}
    </a>
</div>

<div class="d-flex align-items-center gap-2">
    {% if doc.tipo_documento %}
        <span class="badge bg-success p-2">{{ doc.tipo_documento.nome }}</span>
    {% else %}
        <form action="{{ url_for('documento.atribuir_tipo', processo_id=processo.id, documento_id=doc.id) }}" method="POST" class="d-flex gap-2">
            <select name="tipo_documento_id" class="form-select form-select-sm" required>
                <option value="">Selecione o tipo...</option>
                {% for tipo in tipos_documento %}
                    <option value="{{ tipo.id }}">{{ tipo.nome }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="btn btn-sm btn-outline-primary" title="Salvar Tipo">
                <i class="bi bi-check-lg"></i>
            </button>
        </form>
    {% endif %}

    <form action="{{ url_for('documento.excluir', processo_id=processo.id, documento_id=doc.id) }}" method="POST" onsubmit="return confirm('Tem certeza que deseja excluir este documento?');">
        <button type="submit" class="btn btn-sm btn-outline-danger" title="Excluir">
            <i class="bi bi-trash"></i>
        </button>
    </form>
</div>

{% if not doc.tipo_documento %}
<div class="w-100 mt-1"><small class="text-warning">Este documento precisa ser classificado.</small></div>
{% endif %}