{% extends 'base.html' %}
{% block title %}4ª COECEX - Buscar Registro{% endblock %}
{% block extra_js %}
  <script>
  document.getElementById('btnAnalise').addEventListener('click', function(e) {
    e.preventDefault();
    const numero = document.getElementById('{{ form.numero.id }}').value;
    if (numero.match(/^\d{6}$/)) {
      window.location.href = "{{ url_for('main.analise_inatividade', numero='__NUM__') }}".replace('__NUM__', numero);
    } else {
      alert('Digite um número válido (formato 123456).');
    }
  });
  </script>
{% endblock %}
{% block content %}
<header class="bg-light py-3 mb-4">
  <div class="container text-center mt-2">
    <img src="{{ url_for('static', filename='SAI.png') }}" alt="Sistema de Geração de Documentos" style="max-height:250px;">
  </div>
</header>
<div class="row justify-content-center mt-4">
  <div class="col-md-6">
    <div class="card shadow-sm">
      <div class="card-body">
        <h4 class="card-title text-center text-primary mb-4">Buscar Registro</h4>
        <form method="post">
          {{ form.hidden_tag() }}
          <div class="mb-3">
            <strong>{{ form.numero.label(class="form-label") }}</strong> (sem o ponto):
            {{ form.numero(
                class="form-control",
                placeholder="123456",
                pattern="^\d{6}$",
                title="Use o formato 123456"
            ) }}
            {% for error in form.numero.errors %}
              <div class="text-danger mt-1">{{ error }}</div>
            {% endfor %}
          </div>
          <div class="text-center">
            {{ form.submit(class="btn btn-primary") }}
            <a href="#" id="btnAnalise" class="btn btn-warning me-2">Analisar</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
