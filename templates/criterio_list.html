{% extends 'base.html' %}
{% block title %}Análises{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mt-4 mb-3">
  <h4 class="m-0">Critérios de Análise</h4>
  <a href="{{ url_for('criterio.nova') }}" class="btn btn-primary">Novo critério</a>
</div>

<form method="get" class="mb-4">
    <div class="input-group">
        <input type="search" name="q" class="form-control" placeholder="Filtrar por nome ou tag..." value="{{ q or '' }}">
        <button class="btn btn-outline-secondary" type="submit">
            <i class="bi bi-search"></i> Filtrar
        </button>
    </div>
</form>

<div class="card">
  <div class="table-responsive">
    <table class="table table-hover align-middle m-0">
      <thead class="table-light">
        <tr>
          <th style="width:80px;">ID</th>
          <th>Nome</th>
          <th>Tag</th>
          <th>Ativo?</th>
          <th style="width:160px;"></th>
        </tr>
      </thead>
      <tbody>
        {% for c in criterios %}
        <tr>
          <td>{{ c.id }}</td>
          <td>{{ c.nome }}</td>
          <td><span class="badge bg-secondary">{{ c.tag }}</span></td>
          <td>{% if c.ativo %}Sim{% else %}Não{% endif %}</td>
          <td class="text-end">
            <a class="btn btn-sm btn-outline-primary" href="{{ url_for('criterio.editar', criterio_id=c.id) }}">Editar<i class="bi bi-pencil-square"></i></a>
            <a class="btn btn-sm btn-outline-danger" href="{{ url_for('criterio.excluir', criterio_id=c.id) }}">Excluir<i class="bi bi-trash"></i></a>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="4" class="text-center text-muted py-4">Nenhum registro encontrado.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endblock %}
